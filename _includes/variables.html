{%- capture categorySlugs -%}
    {% for post in site.posts %}{{ post.category | strip }}{% unless forloop.last %},{% endunless %}{% endfor %}
{%- endcapture -%}
{%- assign categorySlugs = categorySlugs | split: ',' | uniq -%}

{%- capture categoryLabels -%}
    {% for post in site.posts %}{{ post.categoryLabel | strip }}{% unless forloop.last %},{% endunless %}{% endfor %}
{%- endcapture -%}
{%- assign categoryLabels = categoryLabels | split: ',' | uniq -%}

{%- capture tagSlugs -%}
    {% for post in site.posts %}{{ post.tags | join: ',' }}{% unless forloop.last %},{% endunless %}{% endfor %}
{%- endcapture -%}
{%- assign tagSlugs = tagSlugs | split: ',' | uniq -%}

{%- capture tagLabels -%}
    {% for post in site.posts %}{{ post.tagLabels | join: ',' }}{% unless forloop.last %},{% endunless %}{% endfor %}
{%- endcapture -%}
{%- assign tagLabels = tagLabels | split: ',' | uniq -%}


{%- assign currentCategorySlug = '' -%}
{%- assign currentCategoryLabel = '' -%}
{%- if page.autopages && page.page_type == 'category_list' -%}
    {%- for categorySlug in categorySlugs -%}
        {%- if page.autopages.display_name == categorySlug -%}
            {%- assign currentCategorySlug = categorySlug -%}
            {%- assign currentCategoryLabel = categoryLabels[forloop.index0] -%}
            {%- break -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}

{%- assign currentTagSlug = '' %}
{%- assign currentTagLabel = '' %}
{%- if page.autopages && page.page_type == 'tag_list' -%}
    {%- for tagSlug in tagSlugs -%}
        {%- if page.autopages.display_name == tagSlug -%}
            {%- assign currentTagSlug = tagSlug -%}
            {%- assign currentTagLabel = tagLabels[forloop.index0] -%}
            {%- break -%}
        {%- endif -%}
    {%- endfor -%}
{%- endif -%}
